{% extends 'capacitaciones_app/base.html' %}
{% load static %}

{% block title %}Asignaci√≥n de Cursos{% endblock %}

{% block content %}
<!-- Corporate Asignacion Admin with Tailwind CSS -->
<div class="min-h-screen bg-gradient-to-br from-gray-50 via-slate-100 to-emerald-50 py-8">
    <!-- Header con efecto glassmorphism corporativo -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="backdrop-blur-sm bg-white/40 rounded-2xl border border-gray-200/30 shadow-lg p-8 mb-8 animate-fade-in">
            <div class="text-center">                <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-emerald-700 via-emerald-600 to-emerald-800 bg-clip-text text-transparent mb-4 animate-slide-up">
                    üß© Asignaci√≥n de Cursos
                </h1>
                <p class="text-slate-600 text-lg animate-fade-in" style="animation-delay: 0.2s;">
                    Panel de Gesti√≥n Corporativo ¬∑ Sistema de Asignaciones
                </p>
            </div>
        </div>

        <!-- KPIs Principales con dise√±o moderno -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">            <!-- Cursos Disponibles -->
            <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-700 to-emerald-900 p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 animate-bounce-in">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 bg-white/20 rounded-xl animate-float">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold mb-1">{{ cursos.count }}</div>
                            <div class="text-emerald-100 text-sm">üìö Cursos</div>
                        </div>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-2">
                        <div class="bg-white rounded-full h-2 transition-all duration-1000" style="width: 85%;"></div>
                    </div>
                </div>
            </div>            <!-- Usuarios Activos -->
            <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-700 to-emerald-900 p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 animate-bounce-in" style="animation-delay: 0.1s;">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 bg-white/20 rounded-xl animate-float" style="animation-delay: 0.5s;">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold mb-1">{{ usuarios.count }}</div>
                            <div class="text-emerald-100 text-sm">üë§ Usuarios</div>
                        </div>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-2">
                        <div class="bg-white rounded-full h-2 transition-all duration-1000" style="width: 78%;"></div>
                    </div>
                </div>
            </div><!-- Grupos Creados -->
            <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-700 to-emerald-900 p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 animate-bounce-in" style="animation-delay: 0.2s;">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 bg-white/20 rounded-xl animate-float" style="animation-delay: 1s;">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold mb-1">{{ grupos.count }}</div>
                            <div class="text-emerald-100 text-sm">üë• Grupos</div>
                        </div>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-2">
                        <div class="bg-white rounded-full h-2 transition-all duration-1000" style="width: 65%;"></div>
                    </div>
                </div>
            </div>            <!-- Asignaciones Totales -->
            <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-700 to-emerald-900 p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 animate-bounce-in" style="animation-delay: 0.3s;">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="p-3 bg-white/20 rounded-xl animate-float" style="animation-delay: 1.5s;">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold mb-1" id="total-asignaciones">0</div>
                            <div class="text-emerald-100 text-sm">üìà Asignaciones</div>
                        </div>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-2">
                        <div class="bg-white rounded-full h-2 transition-all duration-1000" style="width: 92%;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel de Filtros Compactos -->
        <div class="mb-6">
            <div class="bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-lg border border-white/20 transition-all duration-300">
                <div class="flex items-center mb-3">
                    <div class="w-8 h-8 bg-gradient-to-r from-slate-600 to-slate-800 rounded-lg flex items-center justify-center text-white text-sm mr-3">
                        üîç
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800">Filtros</h3>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3">
                    <!-- Filtro Cursos -->
                    <div class="lg:col-span-2">
                        <label class="block text-xs font-medium text-gray-600 mb-1">üîç Buscar Cursos</label>
                        <input type="text" 
                               class="w-full px-3 py-2 text-sm bg-white/80 border border-gray-200 rounded-lg focus:ring-1 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm" 
                               id="filtro-cursos" 
                               placeholder="Filtrar por nombre...">
                    </div>
                    
                    <!-- Filtro Usuarios -->
                    <div class="lg:col-span-2">
                        <label class="block text-xs font-medium text-gray-600 mb-1">üë§ Buscar Usuarios</label>
                        <input type="text" 
                               class="w-full px-3 py-2 text-sm bg-white/80 border border-gray-200 rounded-lg focus:ring-1 focus:ring-slate-500 focus:border-transparent transition-all duration-300 backdrop-blur-sm" 
                               id="filtro-usuarios" 
                               placeholder="Filtrar por usuario...">
                    </div>
                    
                    <!-- Bot√≥n de Acci√≥n Compacto -->
                    <div class="lg:col-span-1 flex items-end">
                        <button class="w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white px-3 py-2 text-sm rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-300 font-medium shadow-md hover:shadow-lg hover:scale-105" 
                                id="limpiar-filtros">
                            üóëÔ∏è Limpiar
                        </button>
                    </div>
                </div>
            </div>
        </div>        <!-- Contenido Principal en Grid Moderno -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            {% include 'capacitaciones_app/asignacion_admin/_columna_cursos.html' %}
            {% include 'capacitaciones_app/asignacion_admin/_columna_usuarios.html' %}
            {% include 'capacitaciones_app/asignacion_admin/_columna_grupos.html' %}
        </div>
    </div>
</div>

<!-- CSS Personalizado para animaciones avanzadas -->
<style>
    /* Animaciones personalizadas del dashboard moderno */
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes slide-up {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes bounce-in {
        0% {
            opacity: 0;
            transform: scale(0.3);
        }
        50% {
            transform: scale(1.05);
        }
        70% {
            transform: scale(0.9);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }
    
    @keyframes scale-in {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }
    
    @keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-6px);
        }
    }
    
    .animate-fade-in {
        animation: fade-in 0.8s ease-out;
    }
    
    .animate-slide-up {
        animation: slide-up 0.8s ease-out;
    }
    
    .animate-bounce-in {
        animation: bounce-in 0.6s ease-out;
    }
    
    .animate-scale-in {
        animation: scale-in 0.6s ease-out;
    }
    
    .animate-float {
        animation: float 3s ease-in-out infinite;
    }
    
    /* Glassmorphism efecto mejorado */
    .backdrop-blur-sm {
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
    }
    
    .backdrop-blur-md {
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
    }
    
    /* Hover effects mejorados */
    .group:hover .group-hover\:scale-110 {
        transform: scale(1.1);
    }
    
    /* Efectos de focus para inputs */
    input:focus {
        transform: scale(1.02);
    }
    
    /* Animaciones para botones */
    button:hover {
        transform: translateY(-2px);
    }
    
    button:active {
        transform: translateY(0);
    }
</style>

<!-- JavaScript para interactividad adicional -->
<script>
    // Animaciones de contador y efectos avanzados
    document.addEventListener('DOMContentLoaded', function() {
        // Animar contadores
        const counters = document.querySelectorAll('.text-3xl.font-bold');
        counters.forEach(counter => {
            const target = parseInt(counter.textContent);
            if (!isNaN(target)) {
                let current = 0;
                const increment = target / 30;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.textContent = target;
                        clearInterval(timer);
                    } else {
                        counter.textContent = Math.floor(current);
                    }
                }, 50);
            }
        });
        
        // Efectos de hover mejorados para las cards
        const cards = document.querySelectorAll('.group');
        cards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-8px) scale(1.02)';
                this.style.transition = 'all 0.3s ease';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
        
        // Efectos para inputs
        const inputs = document.querySelectorAll('input[type="text"]');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.style.transform = 'scale(1.02)';
                this.style.transition = 'all 0.3s ease';
            });
            
            input.addEventListener('blur', function() {
                this.style.transform = 'scale(1)';
            });
        });
        
        // Efectos para botones
        const buttons = document.querySelectorAll('button');
        buttons.forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px) scale(1.05)';
                this.style.transition = 'all 0.3s ease';
            });
            
            button.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
    });
</script>

{% include 'capacitaciones_app/asignacion_admin/_historial.html' %}
{% include 'capacitaciones_app/asignacion_admin/_modal_cursos.html' %}
{% include 'capacitaciones_app/asignacion_admin/_modal_miembros_grupo.html' %}
{% include 'capacitaciones_app/asignacion_admin/_modal_asignacion_masiva.html' %}
{% include 'capacitaciones_app/asignacion_admin/_asignacion_style.html' %}
{% include 'capacitaciones_app/asignacion_admin/_asignacion_script.html' %}
{% endblock %}
