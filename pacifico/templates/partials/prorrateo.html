 <!-- Prorrateo -->
 <div class="flex-1 p-4 border rounded-lg mb-2">
    <div class="flex items-center ">
        <h1 class="text-lg font-bold">Prorrateo</h1>
        <div class="ml-auto">
            <label class="inline-flex items-center ms-5 cursor-pointer">
                <input type="checkbox" id="toggleProrrateo" class="sr-only peer" onchange="toggleProrrateoSection()">
                <div class="relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"></div>
            </label>
        </div>
    </div>
  <div id="sectionProrrateo" class="flex-1 p-1 rounded-lg mb-1">
    <div class="flex-1 mb-4">
        <label for="primerMes" class="block text-sm font-medium text-gray-700 mb-1">Seleccione el primer mes</label>
        <select id="primerMes" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            <option value="" selected disabled>Seleccione un mes</option>
            <option value="0">Enero</option>
            <option value="1">Febrero</option>
            <option value="2">Marzo</option>
            <option value="3">Abril</option>
            <option value="4">Mayo</option>
            <option value="5">Junio</option>
            <option value="6">Julio</option>
            <option value="7">Agosto</option>
            <option value="8">Septiembre</option>
            <option value="9">Octubre</option>
            <option value="10">Noviembre</option>
            <option value="11">Diciembre</option>
        </select>
    </div>
    
    <div id="prorrateoCampos" class="flex flex-wrap">
        <div class="w-full md:w-1/3 px-2">
            <div class="flex-1 mb-4">
                <label id="mes0" class="block text-sm font-medium text-gray-700 mb-1">Mes 1</label>
                <input type="number" id="monto0" name="monto0" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes1" class="block text-sm font-medium text-gray-700 mb-1">Mes 2</label>
                <input type="number" id="monto1" name="monto1" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes2" class="block text-sm font-medium text-gray-700 mb-1">Mes 3</label>
                <input type="number" id="monto2" name="monto2" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes3" class="block text-sm font-medium text-gray-700 mb-1">Mes 4</label>
                <input type="number" id="monto3" name="monto3" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
        </div>
        <div class="w-full md:w-1/3 px-2">
            <div class="flex-1 mb-4">
                <label id="mes4" class="block text-sm font-medium text-gray-700 mb-1">Mes 5</label>
                <input type="number" id="monto4" name="monto4" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes5" class="block text-sm font-medium text-gray-700 mb-1">Mes 6</label>
                <input type="number" id="monto5" name="monto5" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes6" class="block text-sm font-medium text-gray-700 mb-1">Mes 7</label>
                <input type="number" id="monto6" name="monto6" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes7" class="block text-sm font-medium text-gray-700 mb-1">Mes 8</label>
                <input type="number" id="monto7" name="monto7" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
        </div>
        <div class="w-full md:w-1/3 px-2">
            <div class="flex-1 mb-4">
                <label id="mes8" class="block text-sm font-medium text-gray-700 mb-1">Mes 9</label>
                <input type="number" id="monto8" name="monto8" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes9" class="block text-sm font-medium text-gray-700 mb-1">Mes 10</label>
                <input type="number" id="monto9" name="monto9" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes10" class="block text-sm font-medium text-gray-700 mb-1">Mes 11</label>
                <input type="number" id="monto10" name="monto10" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
            <div class="flex-1 mb-4">
                <label id="mes11" class="block text-sm font-medium text-gray-700 mb-1">Mes 12</label>
                <input type="number" id="monto11" name="monto11" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow">
            </div>
        </div>
    </div>

<div class="flex-1 mb-4">
    <button id="calcularSuma" type="button" class="bg-blue-500 text-white px-4 py-2 rounded">Calcular Prorrateo</button>
</div>

</div>
<div class="overflow-x-auto mt-2">
    <table class="w-full text-sm text-center border text-gray-500 mb-3">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3">
                    TOTAL
                </th>
                <th scope="col" class="px-6 py-3">
                    ENTRE 12
                </th>
                <th scope="col" class="px-6 py-3">
                     MENOS SALARIO
                </th>
              
            </tr>
        </thead>
        <tbody>
            <tr class="bg-white border-b">
                <td class="px-6 py-4">
                    <input type="number" id="totalSuma" name="totalSuma" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow" readonly>
                </td>
                <td class="px-6 py-4">
                    <input type="number" id="entreDoce" name="entreDoce" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow" readonly>
                
                </td>
                <td class="px-6 py-4">
                    <input type="number" id="menosSalario" name="menosSalario" class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-blue-500 hover:border-gray-300 shadow-sm focus:shadow" readonly>
                
                </td>
            
               
            </tr>
        </tbody>
    </table>
</div>
   
</div>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        const primerMesSelect = document.getElementById('primerMes');
        const meses = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];

        primerMesSelect.addEventListener('change', function() {
            const primerMes = parseInt(primerMesSelect.value);
            for (let i = 0; i < 12; i++) {
                const mesIndex = (primerMes - i + 12) % 12;
                document.getElementById(`mes${i}`).textContent = meses[mesIndex];
            }
        });
        document.getElementById('calcularSuma').addEventListener('click', function() {
            let total = 0;
            let n_fields = 0;
            for (let i = 0; i < 12; i++) {
            const monto = parseFloat(document.getElementById(`monto${i}`).value) || 0;
            if (monto !== 0) {
                n_fields++;
            }
            total += monto;
            }
            document.getElementById('totalSuma').value = total;
            if (n_fields > 0) {
            const average = total / n_fields;
            //round 2 decimals average
            average = Math.round(average * 100) / 100;
            document.getElementById('entreDoce').value = average;
            //menos salario
            const salario = document.getElementById('id_ingresos').value;
            document.getElementById('menosSalario').value = average - salario;
            
            }
        });
        });
</script>