<!-- Datos generales Section -->
<div class="rounded-lg border bg-white text-card-foreground shadow-sm mb-6" data-v0-t="card">
    <div class="flex flex-col space-y-1.5 p-6">
       <h3 class="text-2xl font-semibold leading-none tracking-tight">Parámetros de la Cotización</h3>
    </div>
    <div class="p-6 pt-0">
       <div class="grid gap-6">
        <div class="flex flex-col space-y-4 mb-2 mt-2 md:flex-row md:space-x-4 md:space-y-0">
                
                
            <button type="button" class="bg-black text-white px-4 py-2 rounded hover:bg-black/90" onclick="openModal()">Buscar Patrono 🔍</button>
           
           <div class="flex-1 mb-4">
               <label for="id_Patrono" class="text-sm font-medium">Patrono</label>
               {{ form.patrono }}
           </div>
           <div class="flex-1 mb-4" id="divPatronoCodigo">
               <label for="id_patronoCodigo" class="text-sm font-medium">Código</label>
               {{ form.patronoCodigo }} 
           </div>
           <div class="flex-1 mb-4" id="divporServDesc">
            <label for="id_porServDesc" class="text-sm font-medium">% Serv Desc.</label>
            {{ form.porServDesc }} 
        </div>
        <div class="flex-1 mb-4" id="divselectDescuento">
            <label for="id_selectDescuento" class="text-sm font-medium">select Descuento</label>
            {{ form.selectDescuento }} 
        </div>
           <div class="flex-1 mb-4" id="divPagaDiciembre">
            <label for="id_pagaDiciembre" class="text-sm font-medium">Paga Diciembre</label>
            {{ form.pagaDiciembre }} 
        </div>
           <div class="flex-1 mb-4">
               <label for="id_cartera" class="text-sm font-medium">Cartera</label>
               {{ form.cartera }}
           </div>
          
           
        </div>
        
        
        <div class="flex space-x-4">
            
            <button type="button" class="bg-black text-white px-4 py-2 rounded hover:bg-black/90" onclick="opencancelacionesModal()">Cancelaciones 📄</button>
           
            <div class="flex-1 mb-4">
               <label for="id_formaPago" class="text-sm font-medium">Forma de Pago</label>
               {{ form.formaPago}}
           </div>
           <div class="flex-1 mb-4">
               <label for="id_periodoPago" class="text-sm font-medium">Periodo de Pago</label>
               {{ form.periodoPago }}
           </div>
        </div>
        <!--Campos vendedor-->
        <div class="flex flex-col space-y-4 md:flex-row md:space-x-4 md:space-y-0">
           
           <button type="button" class="bg-black text-white px-4 py-2 rounded hover:bg-black/90" onclick="openModalVendedor()">Buscar Vendedor 🔍</button>
           
           
           <div class="flex-1 mb-4">
               <label for="id_vendedor" class="text-sm font-medium">Vendedor</label>
               {{ form.vendedor }}
           </div>

           
           
           
           <button type="button" class="bg-black text-white px-4 py-2 rounded hover:bg-black/90" onclick="openDialogComision()">Comisión del Vendedor (%)</button>
           
        </div>
       </div>
    </div>
</div>


<!-- Modal cancelaciones-->
 {% include 'partials/modals/cancelaciones.html' %}


<!-- Modal for comision vendedor-->
<div id="comisionVendedorModal" class="fixed inset-0 bg-gray-900 bg-opacity-70 flex items-center justify-center z-50 hidden">
    <div class="relative w-full max-w-5xl mx-2 sm:mx-auto p-4 sm:p-8 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto">
        <div class="flex flex-col sm:flex-row sm:items-center justify-between">
            <h3 class="text-2xl font-extrabold text-gray-900 flex-1 text-center sm:text-left">Comisión del Vendedor</h3>
           
        </div>        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 py-4">
            <!-- Comisión Card -->
            <div class="bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden">
                <div class="bg-green-600 text-white px-6 py-4">
                    <h4 class="text-lg font-semibold">Comisión del Vendedor</h4>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-12 font-medium text-sm text-gray-700 mb-4 pb-2 border-b border-gray-200">
                        <div class="col-span-5 text-left">Tipo</div>
                        <div class="col-span-3 text-center">Porcentaje (%)</div>
                        <div class="col-span-4 text-right">Monto</div>
                    </div>
                    <div class="grid grid-cols-12 items-center mb-4">
                        <div class="col-span-5 text-left text-gray-800" id="comisionTipoVendedor">{{ form.vendedorTipo }}</div>
                        <div class="col-span-3 flex justify-center">
                            <div class="w-full">{{ form.vendedorComisionPorcentaje }}</div>
                        </div>
                        <div class="col-span-4 flex justify-end">
                            <div class="w-full">{{ form.vendedorComision }}</div>
                        </div>
                    </div>
                    <div class="grid grid-cols-12 items-center mb-4">
                        <div class="col-span-5 text-left text-gray-700">Otro - Se suma a Vendedor</div>
                        <div class="col-span-3 flex justify-center">
                            <div class="w-full">{{ form.vendedorOtroPorcentaje }}</div>
                        </div>
                        <div class="col-span-4 flex justify-end">
                            <div class="w-full">{{ form.vendedorOtroComision }}</div>
                        </div>
                    </div>                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <label for="id_vendedorImpuesto" class="block text-sm font-medium text-gray-700 mb-2">¿Paga Impuesto?</label>
                        <div class="relative">
                            {{ form.vendedorImpuesto }}
                        </div>
                    </div>
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const vendedorImpuestoField = document.getElementById('id_vendedorImpuesto');
                            if (vendedorImpuestoField) {
                                
                                vendedorImpuestoField.classList.add('bg-gray-100', 'cursor-not-allowed', 'opacity-60');
                            }
                        });
                    </script>
                </div>
            </div>            <!-- Gastos Card -->
            <div class="bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden">
                <div class="bg-green-600 text-white px-6 py-4">
                    <h4 class="text-lg font-semibold">Gastos</h4>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-12 font-medium text-sm text-gray-700 mb-4 pb-2 border-b border-gray-200">
                        <div class="col-span-8">Descripción</div>
                        <div class="col-span-4 text-right">Monto</div>
                    </div>
                    <div class="space-y-4">
                        <div class="grid grid-cols-12 items-center">
                            <div class="col-span-8 text-gray-800">Gastos 1</div>
                            <div class="col-span-4">
                                <input class="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-right focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-colors" type="number" value="0">
                            </div>
                        </div>
                        <div class="grid grid-cols-12 items-center">
                            <div class="col-span-8 text-gray-800">Gastos 2</div>
                            <div class="col-span-4">
                                <input class="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-right focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-colors" type="number" value="0">
                            </div>
                        </div>
                        <div class="grid grid-cols-12 items-center">
                            <div class="col-span-8 text-gray-800">Gastos 3</div>
                            <div class="col-span-4">
                                <input class="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-right focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-colors" type="number" value="0">
                            </div>
                        </div>
                        <div class="grid grid-cols-12 items-center">
                            <div class="col-span-8 text-gray-800">Promoción y Publicidad</div>
                            <div class="col-span-4">
                                <input class="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-right focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-colors" type="number" value="50">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>        <div class="flex justify-end mt-6 pt-4 border-t border-gray-200">
            <button type="button" onclick="closeDialogComision()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-semibold shadow-sm focus:outline-none focus:ring-2 focus:ring-green-400">
                Aceptar
            </button>
        </div>
        
        <!-- Close X button -->
        <button type="button" onclick="closeDialogComision()" class="absolute right-4 top-4 text-gray-400 hover:text-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-green-400 rounded-sm p-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
            </svg>
            <span class="sr-only">Close</span>
        </button>
    </div>
</div>

<script>
    function openDialogComision() {
        const dialog = document.getElementById('comisionVendedorModal');
        dialog.classList.remove('hidden');
    }

    function closeDialogComision() {
        const dialog = document.getElementById('comisionVendedorModal');
        dialog.classList.add('hidden');
    }

    //document.getElementById('closeDialogComision').addEventListener('click', closeDialogComision);
    //document.getElementById('closeDialogComisionIcon').addEventListener('click', closeDialogComision);
</script>




 <script>
document.addEventListener('DOMContentLoaded', function() {
    const formaPagoField = document.getElementById('id_formaPago');
    const periodoPagoField = document.getElementById('id_periodoPago');
    const id_porServDesc = document.getElementById('id_porServDesc');

    formaPagoField.addEventListener('change', function() {
        if (formaPagoField.value === '1') {
            periodoPagoField.value = '1';
        } else if (formaPagoField.value === '2') {
            periodoPagoField.value = '2';
        } else if (formaPagoField.value === '6') {
            id_porServDesc.value = 0;
            periodoPagoField.value = '2';
        } 
    });
});

document.getElementById('divselectDescuento').style.display = 'none';


</script>