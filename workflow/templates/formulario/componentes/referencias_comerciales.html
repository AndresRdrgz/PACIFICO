{# formulario/componentes/referencias_comerciales.html #}
<div id="referencias-comerciales-seccion" class="form-section">
  {{ referencias_comerciales_formset.management_form }}

  {% for ref_form in referencias_comerciales_formset %}
    <div class="referencia-comercial-form border rounded-3 p-4 mb-4 bg-white shadow-sm">
      <h5 class="referencia-comercial-header text-success fw-semibold mb-3">
        <i class="fas fa-building me-1"></i> Referencia Comercial {{ forloop.counter }}
      </h5>

      <div class="row g-4">
        <!-- Nombre -->
        <div class="col-md-6">
          <label for="{{ ref_form.nombre.id_for_label }}">{{ ref_form.nombre.label }}</label>
          <input
            type="text"
            name="{{ ref_form.nombre.html_name }}"
            id="{{ ref_form.nombre.id_for_label }}"
            class="form-control"
            value="{{ ref_form.nombre.value|default_if_none:'' }}"
          >
          {% if ref_form.nombre.errors %}
            <div class="text-danger small mt-1">{{ ref_form.nombre.errors|striptags }}</div>
          {% endif %}
        </div>

        <!-- Tipo -->
        <div class="col-md-6">
          <label for="{{ ref_form.tipo.id_for_label }}">{{ ref_form.tipo.label }}</label>
          <select
            name="{{ ref_form.tipo.html_name }}"
            id="{{ ref_form.tipo.id_for_label }}"
            class="form-select"
          >
            {% for option in ref_form.tipo.field.choices %}
              <option value="{{ option.0 }}" {% if option.0 == ref_form.tipo.value %}selected{% endif %}>
                {{ option.1 }}
              </option>
            {% endfor %}
          </select>
          {% if ref_form.tipo.errors %}
            <div class="text-danger small mt-1">{{ ref_form.tipo.errors|striptags }}</div>
          {% endif %}
        </div>

        <!-- Actividad -->
        <div class="col-md-6">
          <label for="{{ ref_form.actividad.id_for_label }}">{{ ref_form.actividad.label }}</label>
          <input
            type="text"
            name="{{ ref_form.actividad.html_name }}"
            id="{{ ref_form.actividad.id_for_label }}"
            class="form-control"
            value="{{ ref_form.actividad.value|default_if_none:'' }}"
          >
          {% if ref_form.actividad.errors %}
            <div class="text-danger small mt-1">{{ ref_form.actividad.errors|striptags }}</div>
          {% endif %}
        </div>

        <!-- TelÃ©fono -->
        <div class="col-md-6">
          <label for="{{ ref_form.telefono.id_for_label }}">{{ ref_form.telefono.label }}</label>
          <input
            type="text"
            name="{{ ref_form.telefono.html_name }}"
            id="{{ ref_form.telefono.id_for_label }}"
            class="form-control"
            placeholder="0000-0000"
            value="{{ ref_form.telefono.value|default_if_none:'' }}"
          >
          {% if ref_form.telefono.errors %}
            <div class="text-danger small mt-1">{{ ref_form.telefono.errors|striptags }}</div>
          {% endif %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>
