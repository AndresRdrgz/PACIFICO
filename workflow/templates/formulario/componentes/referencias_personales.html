{# formulario/componentes/referencias_personales.html #}
<div id="referencias-personales-seccion" class="form-section">
  {{ referencias_formset.management_form }}

  {% for ref_form in referencias_formset %}
    <div class="referencia-personal-form border rounded-3 p-4 mb-4 bg-white shadow-sm">
      <h5 class="referencia-header text-success fw-semibold mb-3">
        <i class="fas fa-user-friends me-1"></i> Referencia {{ forloop.counter }}
      </h5>

      <div class="row g-4">
        <!-- Nombre -->
        <div class="col-md-6">
          <label for="{{ ref_form.nombre.id_for_label }}">{{ ref_form.nombre.label }}</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-user text-muted"></i></span>
            <input
              type="text"
              name="{{ ref_form.nombre.html_name }}"
              id="{{ ref_form.nombre.id_for_label }}"
              class="form-control"
              value="{{ ref_form.nombre.value|default_if_none:'' }}"
            >
          </div>
          {% if ref_form.nombre.errors %}
            <div class="text-danger small mt-1">{{ ref_form.nombre.errors|striptags }}</div>
          {% endif %}
        </div>

        <!-- Dirección -->
        <div class="col-md-6">
          <label for="{{ ref_form.direccion.id_for_label }}">{{ ref_form.direccion.label }}</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-map-marker-alt text-muted"></i></span>
            <input
              type="text"
              name="{{ ref_form.direccion.html_name }}"
              id="{{ ref_form.direccion.id_for_label }}"
              class="form-control"
              value="{{ ref_form.direccion.value|default_if_none:'' }}"
            >
          </div>
          {% if ref_form.direccion.errors %}
            <div class="text-danger small mt-1">{{ ref_form.direccion.errors|striptags }}</div>
          {% endif %}
        </div>

        <!-- Parentesco -->
        <div class="col-md-6">
          <label for="{{ ref_form.relacion.id_for_label }}">{{ ref_form.relacion.label }}</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-user-friends text-muted"></i></span>
            <input
              type="text"
              name="{{ ref_form.relacion.html_name }}"
              id="{{ ref_form.relacion.id_for_label }}"
              class="form-control"
              value="{{ ref_form.relacion.value|default_if_none:'' }}"
            >
          </div>
          {% if ref_form.relacion.errors %}
            <div class="text-danger small mt-1">{{ ref_form.relacion.errors|striptags }}</div>
          {% endif %}
        </div>

        <!-- Teléfono -->
        <div class="col-md-6">
          <label for="{{ ref_form.telefono.id_for_label }}">{{ ref_form.telefono.label }}</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-phone text-muted"></i></span>
            <input
              type="text"
              name="{{ ref_form.telefono.html_name }}"
              id="{{ ref_form.telefono.id_for_label }}"
              class="form-control"
              placeholder="0000-0000"
              value="{{ ref_form.telefono.value|default_if_none:'' }}"
            >
          </div>
          {% if ref_form.telefono.errors %}
            <div class="text-danger small mt-1">{{ ref_form.telefono.errors|striptags }}</div>
          {% endif %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>
