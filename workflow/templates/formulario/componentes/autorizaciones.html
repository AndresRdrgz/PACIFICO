<!-- formulario/componentes/autorizaciones.html -->
<div id="autorizaciones-seccion" class="form-section mt-4">
  <div class="form-card">
    <div class="row g-4">
      <!-- ¿Autoriza revisión de APC? -->
      <div class="col-md-12">
        <div class="p-3 rounded-3 mb-4"
          style="background: linear-gradient(90deg,#e8f9f1 0%,#f5f5f5 100%); border:1px solid #d1e7dd;">
          <label class="fw-semibold mb-2" for="autoriza_apc_toggle"
            style="font-size:1.15rem; color:#009c3c;">
            <i class="fas fa-user-check me-2"></i>¿Nos autorizas a revisar tu APC?
            <br>
            <small class="text-muted">(Artículo 23 de la Ley 24 del 22 de mayo del 2002)</small>
          </label>
          <div class="d-flex align-items-center gap-3 mt-2">
            <div class="form-check form-switch" style="font-size:1.2rem;">
              <input class="form-check-input" type="checkbox" id="autoriza_apc_toggle"
                style="width:2.5em;height:1.5em;">
              <label class="form-check-label ms-2" for="autoriza_apc_toggle" id="autoriza_apc_label"
                style="font-size:1.08rem; color:#444;">No</label>
            </div>
          </div>
          <!-- Actualizado -->
          <input type="hidden" name="{{ form.autoriza_apc.html_name }}" value="false">
          <input type="checkbox" name="{{ form.autoriza_apc.html_name }}" id="{{ form.autoriza_apc.id_for_label }}"
            value="true" class="form-check-input" style="display:none;" {% if form.autoriza_apc.value %}checked{% endif %}>
        </div>
      </div>

      <!-- ¿Acepta tratamiento de datos? -->
      <div class="col-md-12">
        <div class="p-3 rounded-3 mb-4"
          style="background: linear-gradient(90deg,#e8f9f1 0%,#f5f5f5 100%); border:1px solid #d1e7dd;">
          <label class="fw-semibold mb-2" for="acepta_datos_toggle"
            style="font-size:1.15rem; color:#009c3c;">
            <i class="fas fa-user-lock me-2"></i>Acepto permitir a Pacífico Préstamos almacenar y procesar mis datos
            personales.
            <br>
            <small class="text-muted">(Ley 81 del 2019 y su reglamentación)</small>
          </label>
          <div class="d-flex align-items-center gap-3 mt-2">
            <div class="form-check form-switch" style="font-size:1.2rem;">
              <input class="form-check-input" type="checkbox" id="acepta_datos_toggle"
                style="width:2.5em;height:1.5em;">
              <label class="form-check-label ms-2" for="acepta_datos_toggle" id="acepta_datos_label"
                style="font-size:1.08rem; color:#444;">No</label>
            </div>
          </div>
          <!-- Actualizado -->
          <input type="hidden" name="{{ form.acepta_datos.html_name }}" value="false">
          <input type="checkbox" name="{{ form.acepta_datos.html_name }}" id="{{ form.acepta_datos.id_for_label }}"
            value="true" class="form-check-input" style="display:none;" {% if form.acepta_datos.value %}checked{% endif %}>
        </div>
      </div>

      <!-- ¿Es beneficiario final? -->
      <div class="col-md-12">
        <div class="p-3 rounded-3 mb-4"
          style="background: linear-gradient(90deg,#e8f9f1 0%,#f5f5f5 100%); border:1px solid #d1e7dd;">
          <label class="fw-semibold mb-2" for="es_beneficiario_final_toggle"
            style="font-size:1.15rem; color:#009c3c;">
            <i class="fas fa-user-tag me-2"></i>Declaro que soy el beneficiario final del crédito.
          </label>
          <div class="d-flex align-items-center gap-3 mt-2">
            <div class="form-check form-switch" style="font-size:1.2rem;">
              <input class="form-check-input" type="checkbox" id="es_beneficiario_final_toggle"
                style="width:2.5em;height:1.5em;">
              <label class="form-check-label ms-2" for="es_beneficiario_final_toggle" id="es_beneficiario_final_label"
                style="font-size:1.08rem; color:#444;">No</label>
            </div>
          </div>
          <!-- Actualizado -->
          <input type="hidden" name="{{ form.es_beneficiario_final.html_name }}" value="false">
          <input type="checkbox" name="{{ form.es_beneficiario_final.html_name }}" id="{{ form.es_beneficiario_final.id_for_label }}"
            value="true" class="form-check-input" style="display:none;" {% if form.es_beneficiario_final.value %}checked{% endif %}>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Autoriza APC
    const apcToggle = document.getElementById('autoriza_apc_toggle');
    const apcLabel = document.getElementById('autoriza_apc_label');
    const apcHidden = document.getElementById('{{ form.autoriza_apc.id_for_label }}');
    apcToggle.checked = apcHidden.checked;
    apcLabel.textContent = apcToggle.checked ? 'Sí' : 'No';
    apcToggle.addEventListener('change', function() {
      apcHidden.checked = this.checked;
      apcLabel.textContent = this.checked ? 'Sí' : 'No';
    });

    // Acepta datos
    const datosToggle = document.getElementById('acepta_datos_toggle');
    const datosLabel = document.getElementById('acepta_datos_label');
    const datosHidden = document.getElementById('{{ form.acepta_datos.id_for_label }}');
    datosToggle.checked = datosHidden.checked;
    datosLabel.textContent = datosToggle.checked ? 'Sí' : 'No';
    datosToggle.addEventListener('change', function() {
      datosHidden.checked = this.checked;
      datosLabel.textContent = this.checked ? 'Sí' : 'No';
    });

    // Beneficiario final
    const benToggle = document.getElementById('es_beneficiario_final_toggle');
    const benLabel = document.getElementById('es_beneficiario_final_label');
    const benHidden = document.getElementById('{{ form.es_beneficiario_final.id_for_label }}');
    benToggle.checked = benHidden.checked;
    benLabel.textContent = benToggle.checked ? 'Sí' : 'No';
    benToggle.addEventListener('change', function() {
      benHidden.checked = this.checked;
      benLabel.textContent = this.checked ? 'Sí' : 'No';
    });
  });
</script>
